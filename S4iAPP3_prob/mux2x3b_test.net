* D:\Git\APP3-S4-2021\S4iAPP3_prob\mux2x3b_test.asc
XU1 o1 o2 o3 out Bin2Dec Vhigh={vv}
XU2 b b1 b2 b3 Dec2Bin Vhigh={vv}
XU3 a a1 a2 a3 Dec2Bin Vhigh={vv}
V1 vss 0 1.8
Va a 0 3
Vb b 0 5
Vsel sel 0 PULSE(0 1.8 1n 10p 10p 1n 2n 5)
XX2 vss a1 a2 a3 b1 b2 b3 0 o1 o2 o3 sel mux2x3b

* block symbol definitions
.subckt mux2x3b vdd a1 a2 a3 b1 b2 b3 vss o1 o2 o3 sel
XX1 a1 b1 sel o1 vdd vss mux2_1 params: ll=180n wn={nnw} wp={nnw*mp}
XX2 a2 b2 sel o2 vdd vss mux2_1 params: ll=180n wn={nnw} wp={nnw*mp}
XX3 a3 b3 sel o3 vdd vss mux2_1 params: ll=180n wn={nnw} wp={nnw*mp}
.param vv=1.8 nnw=8*180n mp=1
.lib BU_180nm.lib
.ends mux2x3b

.subckt mux2_1 a b s o Vdd Vss
M3 N004 N005 o vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M4 vdd N001 N004 vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M5 vdd N002 N003 vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
M6 N006 N001 vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M7 o s N006 vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M8 N006 N005 vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
XX1 a N002 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
XX2 b N001 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
M1 o N002 N006 vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 N003 s o vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
XX3 s N005 vdd vss inv params: ll=180n wn={nnw} wp={nnw*mp}
.lib BU_180nm.lib
.ends mux2_1

.subckt inv In _Q vdd vss
M1 _Q In vss vss NMOS l={ll} w={wn} ad={450n*{wn}} as={450n*{wn}} pd={900n+{wn}} ps={1080n+{wn}}
M2 vdd In _Q vdd PMOS l={ll} w={wp} ad={450n*{wp}} as={450n*{wp}} pd={900n+{wp}} ps={1080n+{wp}}
.lib BU_180nm.lib
.ends inv

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\Olivier\Documents\LTspiceXVII\lib\cmp\standard.mos
.param vv=1.8 nnw=2*180n mp=1
.lib BU_180nm.lib
.op
.tran 0 10n 0 10p
.lib Bin2Dec.sub
.lib Dec2Bin.sub
.backanno
.end
